// Nicholas Johnson (www.nicholasjohnson.com)
// Forward Advance Training (www.forwardadvance.com)
// MIT licence

!function(){var o=function(o){var e={};e.start=function(o){console.log("start drag"),e.initDrag(o)},e.end=function(o){e.destroyDrag()},o.drag=e};o.$inject=["$scope"];var e=function(o,e,n){var t=angular.element(window),r=function(n){e.css({left:n.pageX-o.drag.offsetX-20+"px",top:n.pageY-o.drag.offsetY-20+"px"}),console.log("mousemove")};o.drag.initDrag=function(n){console.log("start drag"),o.drag.offsetX=n.offsetX,o.drag.offsetY=n.offsetY,r(n),e.addClass("dragging"),e.css({position:"absolute","z-index":1e5}),t.on("mousemove",r)},o.drag.destroyDrag=function(){console.log("stop drag"),e.removeClass("dragging"),t.off("mousemove"),e.css({position:"",left:"",top:"","z-index":""})}},n=function(o,e,n){e.on("mousedown",function(e){o.drag.initDrag(e)}),e.on("mouseup",function(e){o.drag.destroyDrag(e)})};angular.module("ng-draggable-widgets",[]).directive("draggableWidget",function(){return{scope:!0,restrict:"A",controller:o,link:{pre:e}}}).directive("draggableWidgetHandle",function(){return{scope:!0,restrict:"A",link:{pre:n}}})}();